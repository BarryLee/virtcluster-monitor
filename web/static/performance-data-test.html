<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title></title>
    <link href="layout.css" rel="stylesheet" type="text/css"></link>
    <!--[if IE]><script language="javascript" type="text/javascript" src="../static/js/excanvas.min.js"></script><![endif]-->
    <script language="javascript" type="text/javascript" src="../static/js/jquery.min.js"></script>
    <script language="javascript" type="text/javascript" src="../static/js/jquery.flot.js"></script>
    <script language="javascript" type="text/javascript" src="../static/js/utils.js"></script>
    <script language="javascript" type="text/javascript" src="../static/js/PlotWrapper.js"></script>
    <script language="javascript" type="text/javascript" src="../static/js/PerfChart.js"></script>
 </head>
    <body>
    <!--<h1>Flot Examples</h1>-->
    <input type="button" id='toggle' value='toggle realtime' />
    <div id="placeholder" style="width:600px;height:300px;"></div>

<script id="source" language="javascript" type="text/javascript">
$(function() {
    //var urlTemplate = '/monitor/json/{host}/{metric}?cf={cf}&step={step}';
    var urlTemplate = '/monitor/json/{host}/{metric}';
    var ds1 = new PerfDataSeries({
            name: 'cpu_usage',
            host: '007',
            metric: 'cpu_usage',
            title: 'CPU usage',
            unit: 'pct',
            urlTemplate: urlTemplate,
            //series: {
            //    //label: 'CPU usage',
            //    color: 'blue',
            //    lines: {
            //        lineWidth: 1,
            //        //fillColor: 'black',
            //        fill: true
            //    },
            //    shadowSize: 1
            //}
    });
    var ds2 = new PerfDataSeries({
            name: 'bytes_in',
            host: '007',
            metric: 'bytes_in', 
            title: 'bytes in',
            unit: 'B/s',
            urlTemplate: urlTemplate
    });
    var ds3 = new PerfDataSeries({
            name: 'bytes_out',
            host: '007',
            metric: 'bytes_out', 
            title: 'bytes out',
            unit: 'B/s',
            urlTemplate: urlTemplate
    });
    var ds4 = new PerfDataSeries({
            name: 'mem_usage',
            host: '007',
            metric: 'mem_usage', 
            title: 'Memory usage',
            unit: 'pct',
            urlTemplate: urlTemplate
    });
    var ds5 = new PerfDataSeries({
            host: '007',
            metric: 'load_five', 
            title: 'load five',
            urlTemplate: urlTemplate
    });

    var myPlot = new PerfChart({
        placeholder: '#placeholder',
        data: [ds1, ds5],
        maxRange: 15*120,
        step: 15,
        urlTemplate: urlTemplate,
        metrics: [
            {
                host: '007',
                metric: 'bytes_in', 
                title: 'bytes in',
                unit: 'B/s',
            },
            {
                host: '007',
                metric: 'bytes_out', 
                title: 'bytes out',
                unit: 'B/s',
            }
        ],
        options: {
        //    lines: { show: true },
        //    points: { show: true }
            //xaxis: { tickLength: 0 }
        }
    });
    //myPlot.addDataSeries(ds2);
    //myPlot.addDataSeries(ds3);
    myPlot.addDataSeries(ds4);
    //myPlot.setRealTime(15000);
    var r = 1;
    $('input').click(function(e) {  
        if(r == 1) {
            myPlot.unsetRealTime();
            r = 0;
        } else {
            r = 1;
            myPlot.setRealTime(15000);
        }
    });
    //myPlot.doPlot();
    //console.log(myPlot.data);
    myPlot.plotOnce();
});
</script>

 </body>
</html>
